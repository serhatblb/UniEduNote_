{% extends "base.html" %}
{% block title %}Åifre SÄ±fÄ±rlama{% endblock %}
{% block content %}
<style>
.auth-box{max-width:400px;margin:80px auto;background:#fff;padding:2rem;border-radius:16px;box-shadow:0 4px 15px rgba(0,0,0,0.08);text-align:center;}
h2{color:#00205B;margin-bottom:1.5rem;}
input{width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;margin-bottom:1rem;}
button{width:100%;background:linear-gradient(135deg,#00205B,#001540);color:#fff;border:none;border-radius:8px;padding:10px;cursor:pointer;}
button:hover{opacity:.9;}
.msg{margin-top:1rem;font-size:15px;}
</style>

<div class="auth-box">
  <h2>ğŸ”’ Åifre SÄ±fÄ±rlama</h2>
  <form id="resetForm">
    <input type="email" id="email" placeholder="E-posta adresiniz" required>
    <button type="submit">SÄ±fÄ±rlama BaÄŸlantÄ±sÄ± GÃ¶nder</button>
  </form>
  <p id="msg" class="msg"></p>
</div>

<script>
document.getElementById("resetForm").addEventListener("submit", async(e)=>{
  e.preventDefault();
  const email=document.getElementById("email").value.trim();
  const msg=document.getElementById("msg");
  msg.style.color="#555";msg.innerText="â³ GÃ¶nderiliyor...";
  try{
    const res=await fetch("/api/auth/password/reset/",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({email})
    });
    const data=await res.json();
    if(res.ok){
      msg.style.color="green";
      msg.innerText="âœ… E-posta gÃ¶nderildi. Gelen kutunuzu kontrol edin.";
    }else{
      msg.style.color="red";
      msg.innerText="âš ï¸ "+(data.error||"Hata oluÅŸtu.");
    }
  }catch{msg.style.color="red";msg.innerText="âš ï¸ Sunucu hatasÄ±.";}
});
</script>
{% endblock %}
