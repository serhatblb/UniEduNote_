{% extends "base.html" %}
{% block title %}Åifre SÄ±fÄ±rlama{% endblock %}
{% block content %}
<style>
  .auth-box{
    max-width:400px;
    margin:80px auto;
    padding:2rem;
    border-radius:20px;
    text-align:center;
  }
  .auth-box h2{color:#00205B;margin-bottom:1.5rem;}
  .auth-box input{
    width:100%;padding:10px;border:1px solid #cbd5f5;
    border-radius:12px;margin-bottom:1rem;font-size:0.95rem;
  }
  .auth-box button{
    width:100%;background:linear-gradient(135deg,#00205B,#001540);
    color:#fff;border:none;border-radius:12px;padding:10px;
    cursor:pointer;font-weight:600;font-size:0.95rem;
  }
  .auth-box button:hover{opacity:.95;}
  .auth-box .msg{margin-top:1rem;font-size:0.9rem;}
</style>

<div class="glass auth-box">
  <h2>ğŸ”’ Åifre SÄ±fÄ±rlama</h2>
  <form id="resetForm">
    <input type="email" id="email" placeholder="E-posta adresiniz" required>
    <button type="submit">SÄ±fÄ±rlama BaÄŸlantÄ±sÄ± GÃ¶nder</button>
  </form>
  <p id="msg" class="msg"></p>
</div>

<script>
document.getElementById("resetForm").addEventListener("submit", async(e)=>{
  e.preventDefault();
  const email=document.getElementById("email").value.trim();
  const msg=document.getElementById("msg");
  msg.style.color="#555";msg.innerText="â³ GÃ¶nderiliyor...";
  try{
    const res=await fetch("/api/auth/password/reset/",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({email})
    });
    const data=await res.json();
    if(res.ok){
      msg.style.color="green";
      msg.innerText="âœ… E-posta gÃ¶nderildi. Gelen kutunuzu kontrol edin.";
    }else{
      msg.style.color="red";
      msg.innerText="âš ï¸ "+(data.error||"Hata oluÅŸtu.");
    }
  }catch{msg.style.color="red";msg.innerText="âš ï¸ Sunucu hatasÄ±.";}
});
</script>
{% endblock %}